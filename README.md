# File Stamp

![スクリーンショット](./document/screen_shot.png)


# Webアプリケーションを開く

https://sagep-app-service-v004.azurewebsites.net

**注意** 現在、開発中であり正しく動作しません。

File Stamp を使うには、Microsoft アカウントが必要です。
アカウントの作成は、
[Microsoft のホームページ](https://account.microsoft.com/account)
で行ってください。


# 概要

File Stamp は、ファイルの内容に対して承認する印鑑を押すような電子署名を行います。

ご使用のPC（ローカル）にある承認しようとしているファイルを
File Stamp サービス内の「ファイルの選択」ボタンで指定し、
「署名する」ボタンを押すことで、
ファイルの内容に対して承認したことになります。

![ファイルの選択](./document/select_a_file.png)

電子署名に記録される署名者は、
署名ボタンを押したときにサインインしているアカウントに
紐づけられているメールアドレスによって識別されます。
同じメールアドレスが複数のアカウントに紐づけられることはできないため、
アカウントが乗っ取られない限り、なりすましは発生しません。

ファイルの内容は、ファイルのハッシュ値（SHA256）で識別されます。
ファイルの内容を一部でも変更するとハッシュ値が異なる値になるため、
別の書類に印鑑を写すようなことはできません。

電子署名は、クラウド上のデータベースに保存されます。
データベースに書き込む権限は File Stamp サービスのバックエンドだけなので、
File Stamp サービスのバックエンドが定義した処理以外の方法で
書き換えることはできません。

電子署名の内容を参照するには、
署名するときと同様に対象となるファイルを指定するだけです。
電子署名の内容は、ファイルの内容に対して署名した人のメールアドレスの一覧です。
電子署名を確認する対象となるファイルを持っている人だけが参照することができます。

![署名済ユーザー](./document/signed_users.png)

署名者は、承認する印鑑に二重線を付けるように、電子署名を取り消すことができます。
取り消したことはクラウドに保存されます。
一度でも署名したことがあることを削除することはできません。


# 当サービスの電子署名の信ぴょう性

File Stamp サービスは、ファイルの内容に対して署名者が署名・承認したことを
電子的な署名によって、利害関係のない第三者として証言する Web サービスです。

File Stamp サービスは、デジタル公開鍵証明書を発行する認証局ではありません。
公開鍵証明書には公開鍵と持ち主の記載がありますが、
File Stamp がこの方法によって持ち主であることを証明するのは、
アカウントのプロバイダーです。

ファイルの内容は、ファイルのハッシュ値（SHA256）で識別されます。
ハッシュ値は、ハッシュ関数で計算された 64文字（SHA256の場合）の文字列です。
ハッシュ関数は、ファイルの内容を元に高度な数学によって計算を行います。
ファイルの一部でも変わっていれば値は変わります。
ファイルの内容を一部改ざんして同じハッシュ値が計算されるようにすることは、
確率的に事実上不可能です。
確率は 2の256乗分の１と言われています。
その確率を下回るようなハッキングが可能であると判明した場合、
そのハッシュ関数に脆弱性が見つかったとして、
そのハッシュ関数を使わないようにニュース等で世界中に周知されます。
ハッシュ関数に脆弱性がないかどうかは、多くの研究者によって今でも
検証がされ続けています。

電子署名が保存される場所は、クラウド上のデータベースです。 
データベースに書き込む権限に相当するキーは、
File Stamp サービスのバックエンドが持っています。
File Stamp サービスのバックエンドが定義した処理以外の方法で
書き換えることはできません。

